{% extends "baseControl.html" %}
{% load static %}
<!--Css del template-->
{% block css %}
<link href="{% static 'css/jquery-ui.min.css' %}" rel="stylesheet" />
<script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
{% endblock %}
<!--Titulo-->
{% block titulo %} Sala de Espera {% endblock %}
{% block content %}
<div class="container py-4 ">
    <h1 class="fw-bold">Sala de Espera</h1>
    <div class="row">
        <div class="col-12 col-md-12">
            <!--Busqueda por nombres-->
            <div class="input-group  py-4">
                <span class="input-group-text bg-white" id="basic-addon1"><i class="fa-solid fa-magnifying-glass"></i></span>
                <input type="text" class="form-control" id="busquedaNombres" placeholder="Nombres" aria-label="Nombres" aria-describedby="basic-addon1">
                <button class="btn btn-outline-dark" type="button" id="buscar-nombre">Buscar</button>
            </div>
        </div>

        <!--Boton abregar nuevo -->
        <div class="text-end">
            <button class="btn btn-outline-dark" type="button" id="buscar-nombre">Abrir Expediente Nuevo</button>
        </div>
        
        <!--Tabla de pacientes en cola-->
        <div class="py-4 table-responsive">
            <table class="table table-bordered text-center">
                <thead class="table-secondary">
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Nombres</th>
                    <th scope="col">Apellidos</th>
                    <th scope="col">Estado</th>
                    <th scope="col">Fase</th>
                    <th scope="col">Consumo</th>
                    <th scope="col">Opciones</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    <td>Isaí Ronaldo</td>
                    <td>Martínez Vásquez</td>
                    <td> - - </td>
                    <td>Signos Vitales</td>
                    <td>$10</td>
                    <td>
                        <i class="fa-solid fa-eye"></i>
                        <i class="fa-solid fa-trash"></i>
                    </td>
                    <form action="" method="post"></form>
                  </tr>
                </tbody>
            </table>
        </div>
    </div>
    
</div>
{% endblock %}
<!--Js de la vista-->
{% block js %}
<script src="{% static 'js/jquery-ui.min.js' %}"></script>
<script>
    
    $('#busquedaNombres').autocomplete({
        source: function(request, response){
            $.ajax({
                url: "{% url 'busqueda_paciente' %}",
                dataType: "json",
                data: {
                    nombre_paciente:request.term,
                },
                success: function(data){
                    
                    response(data)
                }
            });
        },
        minLength: 3,
        
    });

    $('#busquedaApellidos').autocomplete({
        source: function(request, response){
            $.ajax({
                url: "{% url 'busqueda_paciente' %}",
                dataType: "json",
                data: {
                    apellido_paciente:request.term,
                },
                success: function(data){
                    
                    response(data)
                }
            });
        }
    });
</script>
{% endblock %}
