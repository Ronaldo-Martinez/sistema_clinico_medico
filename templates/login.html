{% load static %}
<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Iniciar Sesión</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="{% static 'css/toastr.min.css' %}" rel="stylesheet" />
    <style>
        .bg{
            background-image: url({%static 'img/bg5.jpg'%});
            background-position: center;
        }
        .fill { 
            min-height: 100%;
            height: 100%;
        }
    </style>
  </head>
  <body>
      <!--Login Escritorio-->
    <div class="container">
        <div class="row vh-100 justify-content-center align-items-center">
            <div class="col">
                <div class="row shadow rounded">
                    <!-- Imagen -->
                    <div class="col-6 bg d-none d-md-block">

                    </div>
                    <!-- Login -->
                    <div class="col-12 col-md-6 bg-white p-3">
                        <h2 class="fw-bold text-center p-4">Iniciar Sesión 2</h2>
                        <form class="px-4" action="{% url 'logearse' %}" method="post">
                            {% csrf_token %}
                            <div class="mb-4">
                                <label for="email" class="form-label">Usuario o Correo Electronico</label>
                                <input type="text" class="form-control" name="usuario">
                            </div>
                            <div class="mb-4">
                                <label for="passwbgord" class="form-label">Contraseña</label>
                                <input type="password" class="form-control" name="password">
                            </div>
                            <div class="mb-4 form-check">
                                <input type="checkbox" name="connected" class="form-check-input">
                                <label for="connected" class="form-check-label">No cerrar sesión</label>
                            </div>
                            <div class="d-grid"> 
                                <button type="submit" class="btn-primary rounded">Iniciar Sesión</button>
                            </div>
        
                            <div class="my-3">
                                <span>¿No tienes Cuenta? <a href="#" data-bs-toggle="modal" data-bs-target="#agregarEmpleadoModal">Registrate</a></span><br>
                                <span><a href="#">Recuperar Password</a></span>
                            </div>
                        </form>
                        <!-- Inicio de Sesión con Redes Sociales -->
                        <div class="container w-100 px-5 p-4">
                            <div class="row text-center">
                                <div class="col-12 p-2">Iniciar Sesión</div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <button class="btn btn-outline-primary w-100 my-1">
                                        <div class="row align-items-center">
                                            <div class="col-2">
                                                <img src="{% static 'img/fb.png'%}" width="32" alt="">
                                            </div>
                                            <div class="col-10 text-center">
                                                Facebook
                                            </div>
                                        </div>
                                    </button>
                                </div>
                                <div class="col">
                                    <button class="btn btn-outline-danger w-100 my-1">
                                        <div class="row align-items-center">
                                            <div class="col-2">
                                                <img src="{% static 'img/google.png'%}" width="32" alt="">
                                            </div>
                                            <div class="col-10 text-center">
                                                Google
                                            </div>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!--Fin Inicio de Sesión con Redes Sociales-->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Fin Escritorio-->

    <!--Modal Crear Empleado-->
    <div class="modal fade" id="agregarEmpleadoModal" tabindex="-1" aria-hidden="true" aria-labelledby="modalTitle">
        <div class="modal-dialog modal-xl">
          <div class="modal-content">
            <div class="modal-header text-center">
                <h5 class="modal-title w-100">Registrar Empleado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
              <div class="container">
                
                <form class="row g-3 needs-validation" novalidate>
                    <div class="col-md-6">
                      <label for="validationCustom01" class="form-label">Nombres</label>
                      <input type="text" class="form-control" id="id_nombre_empleado" value="" required>
                      <div class="valid-feedback">
                        Looks good!
                      </div>
                    </div>
                    <div class="col-md-6">
                      <label for="validationCustom02" class="form-label">Apellidos</label>
                      <input type="text" class="form-control" id="id_apellido_empleado" value="" required>
                      <div class="valid-feedback">
                        Looks good!
                      </div>
                    </div>
                    <div class="col-md-6">
                      <label for="validationCustomUsername" class="form-label">Email</label>
                      <div class="input-group has-validation">
                        <span class="input-group-text" id="inputGroupPrepend">@</span>
                        <input type="text" class="form-control" id="id_email_empleado" aria-describedby="inputGroupPrepend" required>
                        <div class="invalid-feedback">
                          Please choose a username.
                        </div>
                      </div>
                    </div>
                    <!--Password-->
                    <div class="col-md-6">
                        <label for="validationCustomUsername" class="form-label">Contraseña</label>
                        <div class="input-group has-validation">
                          <input type="password" class="form-control" id="id_password_empleado" aria-describedby="inputGroupPrepend" required>
                          <div class="invalid-feedback">
                            Please choose a username.
                          </div>
                        </div>
                    </div>
                    <!--Dirección-->
                    <div class="col-md-4">
                        <label for="validationCustom02" class="form-label">Direccion</label>
                        <input type="text" class="form-control" id="id_direccion_empleado" value="" required>
                        <div class="valid-feedback">
                          Looks good!
                        </div>
                      </div>
                    <!--Fecha nacimiento-->
                    <div class="col-md-4">
                        <label for="id_fecha_nacimiento" class="form-label">Fecha de nacimiento</label> 
                        <input type="date" class="form-control" placeholder="Select a date" required id="id_fecha_nacimiento">
                    </div>
                    <!--Sexo-->
                    <div class="col-md-4">
                        <label for="validationCustom04" class="form-label">Sexo</label>
                        <select class="form-select" id="id_select_sexo" required>
                          <option selected disabled value="">Selecione...</option>
                          <option value="1">Maculino</option>
                          <option value="2">Femenino</option>
                        </select>
                        <div class="invalid-feedback">
                          Please select a valid state.
                        </div>
                    </div>
                    <div class="col-4">

                    </div>
                    <div class="col-4">

                    </div>
                </form>
                <div class="col-12 py-2 text-end">
                    <button class="btn btn-success" id="guardar_empleado" >Guardar Datos</button>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>

    <!--Fin Telefonos-->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script>
        url="{% url 'registrarEmpleado' %}";
        let nombres;
        let apellidos;
        let email;
        let password;
        let direccion;
        let fecha_nacimiento;
        let sexo;

        document.getElementById("guardar_empleado").addEventListener("click",function(){
            nombres =  document.getElementById("id_nombre_empleado").value;
            apellidos =  document.getElementById("id_apellido_empleado").value;
            email = document.getElementById("id_email_empleado").value;
            password = document.getElementById("id_password_empleado").value;
            direccion = document.getElementById("id_direccion_empleado").value;
            fecha_nacimiento = document.getElementById("id_fecha_nacimiento").value;
            sexo = $('#id_select_sexo').val();
            $.ajax({
                url: url,
                type:"POST",
                dataType: "json",
                data: {
                    'nombre_empleado':nombres,
                    'apellido_empleado':apellidos,
                    'email_empleado':email,
                    'password_empleado':password,
                    'direccion_empleado':direccion,
                    'fecha_nacimiento':fecha_nacimiento,
                    'sexo_empleado':sexo
                },
                success: function(data){  
                    toastr[data.type](data.data);
                }
      });
            console.log(nombres+" "+apellidos+" "+email+" "+password+" "+direccion+" "+fecha_nacimiento+" "+sexo);
        });

    </script>
    <script src="{% static 'js/toastr.min.js' %}"></script>
    <script src="{% static 'js/sistemaClinico.js' %}"></script>
  </body>
</html>